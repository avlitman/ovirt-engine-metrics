- name: Run initial validations sub-role
  include_role:
    name: "oVirt.metrics/roles/oVirt.initial-validations"

- name: Run fluentd sub-role
  include_role:
    name: "oVirt.metrics/roles/oVirt.fluentd"
  when:
    - hostvars['localhost']['failed_validation'] is undefined

- name: Run collectd sub-role
  include_role:
    name: "oVirt.metrics/roles/oVirt.collectd"
  when:
    - hostvars['localhost']['failed_validation'] is undefined
